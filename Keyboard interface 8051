CNTRL EQU 2043H
PORTA EQU 20404H
PORTB EQU 2042H

ORG

MOV A, #90H
MOV DPTR, #CNTRL
MOVX @DPTR, A
MOV B, #20H

BLNK2: MOV DPTR, #PORTB
MOV A, #FFH
MOVX @DPTR, A
MOV A, #00H
MOVX @DPTR, A
MOV A, #F0H
MOVX @DPTR, A
DJNZ B, BLNK2

ACK: MOV A, #FFH
MOV B, #21H

BLNK1: MOV DPTR, #PORTB
MOV @DPTR, A

MOV DPTR, #PORTC
MOV A, #00H
MOVX @DPTR, A
MOV A, #F0H
MOVX @DPTR, A
LCALL DELAY
RLA
DJNZ B, BLNK1
SJMP BACK

DELAY: MOV y0, #FTH
0loop: MOV y1, #FFH
1loop: djnz y1, 1loop
djnz y0, 0loop

ret
END
